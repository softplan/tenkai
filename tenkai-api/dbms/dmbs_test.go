package dbms_test

import (
	"testing"

	"github.com/softplan/tenkai-api/dbms"
	"github.com/softplan/tenkai-api/dbms/model"
)

func TestInsertEnvironment(t *testing.T) {

	dbms := &dbms.Dbms{}

	var env model.Environment
	env.Group = "TJ/SP"
	env.Name = "Tribunal TJ/SP Produção"
	env.ClusterURI = "https://rancher-k8s-unj.softplan.com.br/k8s/clusters/c-kbfxr"
	env.CACertificate = `-----BEGIN CERTIFICATE-----
	MIIHVTCCBj2gAwIBAgIMJYr6rKpZ/kbHiLdYMA0GCSqGSIb3DQEBCwUAMEwxCzAJ
	BgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWduIG52LXNhMSIwIAYDVQQDExlB
	bHBoYVNTTCBDQSAtIFNIQTI1NiAtIEcyMB4XDTE3MDcxMjE3MDM0NVoXDTIwMDcx
	MjE3MDM0NVowPzEhMB8GA1UECxMYRG9tYWluIENvbnRyb2wgVmFsaWRhdGVkMRow
	GAYDVQQDDBEqLnNvZnRwbGFuLmNvbS5icjCCASIwDQYJKoZIhvcNAQEBBQADggEP
	ADCCAQoCggEBAMB6o943yACQCAKcktSlUkCdTY8MxjPGviF2vtTI6oxagjLr6rCj
	QOOiErNkcxo2yUkSD5FH6RoEs8Sm5kGq1VpOdqxtaxQV18hIFptM4i5wvaYCvZIv
	WqQsILfND+1BqerwoCQKzLEOz3chUYIS49N+ukPsUy4b6BuTRoS9ib3XwDgf4IfO
	mfio7W1VqlPp6KWHTZouW6gxd1S+H8Jx/OwQoYzXgxZeqxQ4fs2aCsUK7Fr26Tdm
	n2K+3AFrQBDTvF+1ObQvRdu+aHZ/zitgoxeqZpJWPYbKHSvM7hYYisx/dr0h9ukB
	1JGdp1ew99CZEsmDrwury+9BmAS3mCNivxUCAwEAAaOCBEIwggQ+MA4GA1UdDwEB
	/wQEAwIFoDCBiQYIKwYBBQUHAQEEfTB7MEIGCCsGAQUFBzAChjZodHRwOi8vc2Vj
	dXJlMi5hbHBoYXNzbC5jb20vY2FjZXJ0L2dzYWxwaGFzaGEyZzJyMS5jcnQwNQYI
	KwYBBQUHMAGGKWh0dHA6Ly9vY3NwMi5nbG9iYWxzaWduLmNvbS9nc2FscGhhc2hh
	MmcyMFcGA1UdIARQME4wQgYKKwYBBAGgMgEKCjA0MDIGCCsGAQUFBwIBFiZodHRw
	czovL3d3dy5nbG9iYWxzaWduLmNvbS9yZXBvc2l0b3J5LzAIBgZngQwBAgEwCQYD
	VR0TBAIwADA+BgNVHR8ENzA1MDOgMaAvhi1odHRwOi8vY3JsMi5hbHBoYXNzbC5j
	b20vZ3MvZ3NhbHBoYXNoYTJnMi5jcmwwLQYDVR0RBCYwJIIRKi5zb2Z0cGxhbi5j
	b20uYnKCD3NvZnRwbGFuLmNvbS5icjAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYB
	BQUHAwIwHQYDVR0OBBYEFIlC1k50mRAdVikfz7rvSI6gg2k5MB8GA1UdIwQYMBaA
	FPXN1TwIUPlqTzq3l9pWg+Zp0mj3MIICbAYKKwYBBAHWeQIEAgSCAlwEggJYAlYA
	dgBWFAaaL9fC7NP14b1Esj7HRna5vJkRXMDvlJhV1onQ3QAAAV03wbL8AAAEAwBH
	MEUCIBvKC3NcNv3/dAJdUoV/sV/ONSnDlrlU6gqC8sZ/dqB4AiEAxabk9IPkpKrp
	Z6xK1Six3vJ8U2VrfsZbfhnFgVnrm7EAdQDd6x0reg1PpiCLga2BaHB+Lo6dAdVc
	iI09EcTNtuy+zAAAAV03wbMtAAAEAwBGMEQCIGummDqNOvGxRWNTwn27o2fao6Ei
	av2Eg9Z5ype4YOB/AiA7f6mugqjDIKT+sFWoAv6/VjCCfoBf6UL3js1lsytUaAB2
	AKS5CZC0GFgUh7sTosxncAo8NZgE+RvfuON3zQ7IDdwQAAABXTfBs1UAAAQDAEcw
	RQIgbUkJ6E/22W8eMZqlfAF4s62rtYNcmxSs3KZGXdy8RUwCIQC0ciWMdyRJXQsk
	7GyPbQgUxIrsxFqWGg9RG4amSRu9PQB1ALvZ37wfinG1k5Qjl6qSe0c4V5UKq1Lo
	GpCWZDaOHtGFAAABXTfBs98AAAQDAEYwRAIgMLgxgtBvhivTOnGObONSMe39Zr8D
	NNBz02bCKhuvxHACICk/ds/0P9P+iN3HmcvaurZqd1d9OBiHyiDL9bzn4m5UAHYA
	7ku9t3XOYLrhQmkfq+GeZqMPfl+wctiDAMR7iXqo/csAAAFdN8G2IwAABAMARzBF
	AiB2WE4p4cAwBkzbIyX+c9Rp32oREKo7QU7SddegXT9AdAIhANKD/EGQMSRdtYh4
	4bKaIqi9S3BhuTY+tjpNRLL3KdQdMA0GCSqGSIb3DQEBCwUAA4IBAQAlHo6Yj+41
	Fwj3vkAKcdvGwi/E/eRsRRzyns4+Ms0gdPur6BDFyaRCaK3CyiZMn4cM8zbj+bVi
	25vQ75hbzkQUxak3SCY/SDUIk+4sK+gBHkGV2yuoUL8VtkEENitwVWZ17SS3OnJU
	lekCpnnOrzxtZs5GgddHyWoUylRNkJl4QWBW7yrhXy5LGIV+IKHKPV3QizbuQG8z
	NfkEA9fBTjbnyNxwwZ0pc/p6t6H5TAp/An9FfAZkl6Xew5tafVdIhUcSRVBFhj5f
	FgaafjZUYhdJGfGW/NFmNd1fAOV1J5QHfssVfkLK5KkLgtLg8HwPdSLPtpz69VsL
	7Cju7FMVPyVY
	-----END CERTIFICATE-----`

	env.Token = "kubeconfig-u-r3loaxpfjg:g72lxgczhxtwbr2brzp74kj64n68qz9fn7qjff2m6h7gdpctqhv7sw"
	env.Namespace = "master"

	session := dbms.Connect()
	defer session.Close()

	dbms.CreateEnvironment(env)

}
